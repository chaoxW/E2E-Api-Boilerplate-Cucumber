# E2E API Boilerplate

This project is a boilerplate for e2e api test automation.
Tests are written in behaviour-driver development (BDD) style using [Cucumber](https://cucumber.io/docs/gherkin/).

## Folder Structure
    .
    ├── src
    │   ├── features
    │   │   └── Files written in Cucumber for each feature (.feature)
    │   ├── steps
    │   │   └── Steps definition written in Typescript
    |   └── support
    |       ├── @enums
    |       |   └── TypeScript declaration files that defines the named constants
    |       ├── @types
    |       |   └── TypeScript declaration files that contain type information (.d.ts)
    |       ├── axios
    |       |   └── Files written in Typescript containing the API client
    |       ├── templates
    |       |   └── Files with templates written in Typescript
    |       ├── utils
    |       |   └── Files written in Typescript containing "utils" classes/functions
    |       └── hooks - cucumbers hooks definition
    ├── reports
    │   ├── html
    │   │   └── .html report
    │   ├── json
    │   │   └── .json files generated by the run
    |   └── report.ts - TypeScript script to create the HTML report
    ├── .eslintrc.json - Set of rules to be followed/enforced in TypeScript code
    ├── .gitignore - Configuration for files or folders to remain local
    ├── .prettierrc - Used with Prettier extension on VS Code so everyone uses the same code format
    ├── package.json - Configuration for scripts and dependencies
    ├── tsconfig.json - Configuration for the Typescript
    ├── properties.ts - Generic configurations and variables to be used when testing
    ├── cucumber.js - Configuration for the Cucumber
    └── Jenkisfile - Jenkins pipeline definition

## Setup

### Dependencies
- [Node.js](http://nodejs.org/) - Works with node v14.16.0 and v16.13.0.

After that we only need to install the dev dependencies.

`npm install`

## Build

Run the TypeScript compiler

`npm run build`

### Lint

In order to keep some codebases, we should run a [static analysis tool](https://www.npmjs.com/package/@typescript-eslint/eslint-plugin)

`npm run lint`

## Run

### Debug

The easiest way to run the tests is by pressing F5 when inside of a feature files, this is possible with the configurations present in the .vscode/launch.json together with VS Code.

### Running all test cases

Another way to run the test is by using the command line.

`npm run test`

Where "test" is the name of the script we want to run, this can be configured on the [package.json](./package.json) file.

### Running only test cases with certain tag

Depending on the test scope we not always want to run the full e2e test automation.

So, we can mark certain scenarios with tags like:
- @smoke-test

Then, we run the test by using the command line.

`npm run test -- --tags '@smoke-test'`

## Report

[Cucumber](./cucumber.js) is configured to generate json report [files](./reports/json).

However, there is a [script](./reports/report.ts) in place to generate an HTML report from the json files.
We can run the script by using the command line.

`npm run report`

The HTML report will be [here](./reports/html).

## Built with
-   [Cucumber](https://cucumber.io/)/[CucumberJS](https://github.com/cucumber/cucumber-js/) - Open source tool to write business-readable tests.
-   [Typescript](https://www.typescriptlang.org/) - Open source programming language, syntactical superset of JavaScript.
-   [Axios](https://www.npmjs.com/package/axios) - Promise based HTTP client.

## IDE
- [Visual Studio Code](https://code.visualstudio.com/download)

### VSCode useful extensions:
- [Cucumber (Gherkin) Full Support](https://marketplace.visualstudio.com/items?itemName=alexkrechik.cucumberautocomplete)
- [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)
# E2E-Api-Boilerplate-Cucumber
